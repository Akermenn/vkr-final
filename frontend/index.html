<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Ore Mining Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f2f5; }
        .card { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        img { max-width: 100%; height: auto; }
        h1 { color: #2c3e50; }
    </style>
</head>
<body>
    <h1>üìä –û—Ç—á–µ—Ç –ø–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä—É–¥—ã</h1>

    <div class="card" id="metrics">
        <h2>–ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏</h2>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
    </div>

    <div class="card">
        <h2>–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏</h2>
        <img id="img-corr" src="" alt="Waiting for backend...">
    </div>

    <div class="card">
        <h2>–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h2>
        <img id="img-imp" src="" alt="Waiting for backend...">
    </div>

    <script>
        // –£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞:
        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é localhost (–¥–ª—è —Ç–≤–æ–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)
        let API = 'http://localhost:5000';

        // –ù–æ –µ—Å–ª–∏ —Å–∞–π—Ç –æ—Ç–∫—Ä—ã—Ç –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –∏–º–µ–Ω–∏ Docker (project-frontend),
        // —Ç–æ –∏ –±—ç–∫–µ–Ω–¥ –∏—â–µ–º –ø–æ –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –∏–º–µ–Ω–∏ (project-backend)
        if (window.location.hostname === 'project-frontend') {
            API = 'http://project-backend:5000';
        }

        console.log("Using API:", API);

        fetch(API + '/api/data')
            .then(res => res.json())
            .then(data => {
                document.getElementById('metrics').innerHTML = `<h2>–ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏</h2><p>–¢–æ—á–Ω–æ—Å—Ç—å (Accuracy): <b>${data.accuracy}</b></p>`;
                document.getElementById('img-corr').src = API + '/static/correlation.png';
                document.getElementById('img-imp').src = API + '/static/importance.png';
            })
            .catch(e => {
                console.error(e);
                document.getElementById('metrics').innerHTML = "<p style='color:red'>–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å –ë—ç–∫–µ–Ω–¥–æ–º. –°–µ—Ä–≤–µ—Ä –µ—â–µ –æ–±—É—á–∞–µ—Ç—Å—è...</p>";
            });
    </script>
</body>
</html>